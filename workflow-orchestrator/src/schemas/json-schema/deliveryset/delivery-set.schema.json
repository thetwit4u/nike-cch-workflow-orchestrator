{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DeliverySet Payload",
  "description": "The standard payload sent to the Workflow Orchestrator to initiate or advance a workflow.",
  "version": "0.0.3",
  "type": "object",
  "properties": {
    "deliverySet": {
      "type": "object",
      "properties": {
        "deliverySetId": {
          "type": "string",
          "format": "uuid"
        },
        "consignment": {
          "$ref": "#/definitions/Consignment"
        },
        "deliveries": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Delivery"
          }
        }
      },
      "required": [
        "deliverySetId",
        "consignment",
        "deliveries"
      ]
    }
  },
  "required": [
    "deliverySet"
  ],
  "definitions": {
    "Consignment": {
      "type": "object",
      "properties": {
        "billOfLadingNbr": {
          "type": "string"
        },
        "plannedDischargeDate": {
          "type": "string"
        },
        "totalShipmentCount": {
          "type": "integer"
        },
        "transportVehicle": {
          "$ref": "#/definitions/TransportVehicle"
        },
        "carrier": {
          "$ref": "#/definitions/Partner"
        },
        "forwarder": {
          "$ref": "#/definitions/Partner"
        },
        "originAddress": {
          "$ref": "#/definitions/Address"
        },
        "dischargeAddress": {
          "$ref": "#/definitions/Address"
        },
        "transportHolders": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TransportHolder"
          }
        },
        "shipmentDetails": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ShipmentDetail"
          }
        }
      },
      "required": [
        "billOfLadingNbr",
        "plannedDischargeDate",
        "totalShipmentCount"
      ]
    },
    "Delivery": {
      "type": "object",
      "properties": {
        "deliveryNoteNbr": {
          "type": "string"
        },
        "shipmentNbr": {
          "type": "string"
        },
        "manufacturingCountryOfOrigin": {
          "type": "string"
        },
        "shipmentChangeTimestamp": {
          "type": "string"
        },
        "importerOfRecord": {
          "$ref": "#/definitions/ImporterOfRecord"
        },
        "declarant": {
          "$ref": "#/definitions/Declarant"
        },
        "deliveryItems": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/DeliveryItem"
          }
        }
      },
      "required": [
        "deliveryNoteNbr",
        "shipmentNbr"
      ]
    },
    "DeliveryItem": {
      "type": "object",
      "properties": {
        "deliveryNoteItemNbr": {
          "type": "string"
        },
        "quantity": {
          "type": "integer"
        },
        "crPoNbr": {
          "type": "string"
        },
        "crPoVariantItemNbr": {
          "type": "string"
        },
        "productDetails": {
          "$ref": "#/definitions/ProductDetails"
        },
        "valuation": {
          "$ref": "#/definitions/Valuation"
        },
        "packingDetails": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PackingDetail"
          }
        },
        "commodityBreakDowns": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/CommodityBreakDown"
          }
        }
      },
      "required": [
        "deliveryNoteItemNbr",
        "quantity"
      ]
    },
    "ProductDetails": {
      "type": "object",
      "properties": {
        "code": {
          "type": "string"
        },
        "size": {
          "type": "string"
        },
        "quality": {
          "type": "string"
        },
        "grossWeightInGrams": {
          "type": "number"
        },
        "netWeightInGrams": {
          "type": "number"
        },
        "netNetWeightInGrams": {
          "type": "number"
        },
        "weightFactoryCode": {
          "type": "string"
        },
        "factoryWeightChangeTimestamp": {
          "type": "string"
        },
        "factoryProductWeightAndMeasurementUUID": {
          "type": "string"
        },
        "mcoDetails": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/McoDetail"
          }
        }
      },
      "required": [
        "code"
      ]
    },
    "Valuation": {
      "type": "object",
      "properties": {
        "valuationMethod": {
          "type": "string"
        },
        "baseValue": {
          "$ref": "#/definitions/BaseValue"
        }
      },
      "required": [
        "valuationMethod",
        "baseValue"
      ]
    },
    "PackingDetail": {
      "type": "object",
      "properties": {
        "goodsHolderNbr": {
          "type": "string"
        },
        "packedQuantity": {
          "type": "integer"
        }
      },
      "required": [
        "goodsHolderNbr",
        "packedQuantity"
      ]
    },
    "CommodityBreakDown": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "commodities": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Commodity"
          }
        }
      },
      "required": [
        "type"
      ]
    },
    "Commodity": {
      "type": "object",
      "properties": {
        "harmonizedCode": {
          "type": "string"
        },
        "harmonizedCodePercentage": {
          "type": "number"
        },
        "dutyPercentage": {
          "type": "number"
        },
        "vatPercentage": {
          "type": "number"
        },
        "supplementaryUnitOfMeasure": {
          "type": "string"
        },
        "controlCodes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ControlCode"
          }
        }
      },
      "required": [
        "harmonizedCode"
      ]
    },
    "ControlCode": {
      "type": "object",
      "properties": {},
      "additionalProperties": true
    },
    "McoDetail": {
      "type": "object",
      "properties": {
        "mco": {
          "type": "string"
        },
        "quantity": {
          "type": "integer"
        }
      },
      "required": [
        "mco",
        "quantity"
      ]
    },
    "BaseValue": {
      "type": "object",
      "properties": {
        "amount": {
          "type": "number"
        },
        "currency": {
          "type": "string"
        },
        "source": {
          "type": "string"
        }
      },
      "required": [
        "amount",
        "currency"
      ]
    },
    "TransportVehicle": {
      "type": "object",
      "properties": {
        "modeOfTransportation": {
          "type": "string"
        },
        "vehicleId": {
          "type": "string"
        },
        "voyageNumber": {
          "type": "string"
        }
      },
      "required": [
        "modeOfTransportation"
      ]
    },
    "TransportHolder": {
      "type": "object",
      "properties": {
        "transportHolderNbr": {
          "type": "string"
        },
        "typeCode": {
          "type": "string"
        },
        "typeSizeCode": {
          "type": "string"
        }
      },
      "required": [
        "transportHolderNbr"
      ]
    },
    "ShipmentDetail": {
      "type": "object",
      "properties": {
        "shipmentNbr": {
          "type": "string"
        },
        "isSamplesShipment": {
          "type": "boolean"
        },
        "ultimateDestination": {
          "$ref": "#/definitions/ShipmentUltimateDestination"
        },
        "goodsHolders": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/GoodsHolder"
          }
        }
      },
      "required": [
        "shipmentNbr"
      ]
    },
    "ShipmentUltimateDestination": {
      "type": "object",
      "properties": {
        "codeNbr": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "address": {
          "$ref": "#/definitions/Address"
        }
      },
      "required": [
        "codeNbr"
      ]
    },
    "GoodsHolder": {
      "type": "object",
      "properties": {
        "goodsHolderNbr": {
          "type": "string"
        },
        "weightInGrams": {
          "type": "number"
        },
        "volumeInCcm": {
          "type": "number"
        },
        "transportHolderNbr": {
          "type": "string"
        }
      },
      "required": [
        "goodsHolderNbr"
      ]
    },
    "Partner": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "address": {
          "$ref": "#/definitions/Address"
        },
        "contactDetails": {
          "$ref": "#/definitions/ContactDetails"
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "ImporterOfRecord": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "address": {
          "$ref": "#/definitions/Address"
        },
        "contactDetails": {
          "$ref": "#/definitions/ContactDetails"
        },
        "bondDetails": {
          "$ref": "#/definitions/BondDetails"
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "Declarant": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "address": {
          "$ref": "#/definitions/Address"
        },
        "contactDetails": {
          "$ref": "#/definitions/ContactDetails"
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "BondDetails": {
      "type": "object",
      "properties": {
        "customsBondNumber": {
          "type": "string"
        },
        "customsBondType": {
          "type": "string"
        },
        "suretyNumber": {
          "type": "string"
        }
      },
      "required": [
        "customsBondNumber"
      ]
    },
    "Address": {
      "type": "object",
      "properties": {
        "addressLine1": {
          "type": "string"
        },
        "postalCode": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "provinceStateRegionCode": {
          "type": "string"
        },
        "countryCode": {
          "type": "string"
        }
      },
      "required": [
        "addressLine1",
        "postalCode",
        "city",
        "countryCode"
      ]
    },
    "ContactDetails": {
      "type": "object",
      "properties": {
        "email": {
          "type": "string"
        },
        "telephone": {
          "type": "string"
        }
      },
      "required": [
        "email"
      ]
    }
  }
}
